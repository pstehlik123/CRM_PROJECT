{% extends 'base.html' %}

{% block content %}
<h1>Sales Leads</h1>

{% if current_user.is_admin() %}
<div class="admin-actions">
    <a href="{{ url_for('add_lead') }}" class="btn btn-admin">+ Add Lead</a>
</div>
{% endif %}

<table class="table">
    <tr>
        <th>Name</th>
        <th>Company</th>
        <th>Value</th>
        <th>Source</th>
        <th>Actions</th>
    </tr>
    {% for l in leads %}
    <tr>
        <td>{{ l.name }}</td>
        <td>{{ l.company }}</td>
        <td>${{ l.value }}</td>
        <td>{{ l.source }}</td>
        <td>
            <a href="{{ url_for('lead_detail', lead_id=l.id) }}" class="btn btn-sm btn-primary">View</a>
            {% if current_user.is_admin() %}
            <form method="POST" action="{{ url_for('delete_lead', lead_id=l.id) }}" style="display:inline">
                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</button>
            </form>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
