{% extends 'base.html' %}

{% block content %}
<h1>Customers</h1>

{% if current_user.is_admin() %}
<div class="admin-actions">
    <a href="{{ url_for('add_customer') }}" class="btn btn-admin">+ Add Customer</a>
</div>
{% endif %}

<table class="table">
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Company</th>
        <th>Phone</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    {% for c in customers %}
    <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.email }}</td>
        <td>{{ c.company }}</td>
        <td>{{ c.phone }}</td>
        <td>{{ c.status }}</td>
        <td>
            <a href="{{ url_for('customer_detail', customer_id=c.id) }}" class="btn btn-sm btn-primary">View</a>
            {% if current_user.is_admin() %}
            <a href="{{ url_for('edit_customer', customer_id=c.id) }}" class="btn btn-sm btn-primary">Edit</a>
            <form method="POST" action="{{ url_for('delete_customer', customer_id=c.id) }}" style="display:inline">
                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</button>
            </form>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
